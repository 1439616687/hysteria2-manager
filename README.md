# Hysteria2 Manager v2.0

<div align="center">

![Hysteria2 Manager](https://img.shields.io/badge/Hysteria2-Manager%20v2.0-00a6fb?style=for-the-badge)
![ç‰ˆæœ¬](https://img.shields.io/badge/ç‰ˆæœ¬-2.0.0-00d68f?style=for-the-badge)
![è®¸å¯è¯](https://img.shields.io/badge/è®¸å¯è¯-MIT-ffaa00?style=for-the-badge)
![å¹³å°](https://img.shields.io/badge/å¹³å°-Linux-0095ff?style=for-the-badge)

**ğŸš€ å…ˆè¿›çš„ä»£ç†ç®¡ç†ç³»ç»Ÿ - å¸¦Webè®¤è¯åŠŸèƒ½**

[**åŠŸèƒ½ç‰¹æ€§**](#æ ¸å¿ƒåŠŸèƒ½) | [**å¿«é€Ÿå®‰è£…**](#ä¸€é”®å®‰è£…) | [**ä½¿ç”¨æ•™ç¨‹**](#ä½¿ç”¨æ•™ç¨‹) | [**APIæ–‡æ¡£**](#api-æ–‡æ¡£) | [**å¸¸è§é—®é¢˜**](#å¸¸è§é—®é¢˜)

</div>

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ä»‹ç»](#é¡¹ç›®ä»‹ç»)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [ä¸€é”®å®‰è£…](#ä¸€é”®å®‰è£…)
- [ä½¿ç”¨æ•™ç¨‹](#ä½¿ç”¨æ•™ç¨‹)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å‘½ä»¤å‚è€ƒ](#å‘½ä»¤å‚è€ƒ)
- [APIæ–‡æ¡£](#api-æ–‡æ¡£)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [æ›´æ–°æ—¥å¿—](#æ›´æ–°æ—¥å¿—)
- [å¼€å‘è¯´æ˜](#å¼€å‘è¯´æ˜)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸŒŸ é¡¹ç›®ä»‹ç»

Hysteria2 Manager v2.0 æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ Hysteria2 ä»£ç†æœåŠ¡Webç®¡ç†ç³»ç»Ÿã€‚å®ƒæä¾›äº†ç›´è§‚ã€å®‰å…¨ã€åŠŸèƒ½ä¸°å¯Œçš„ç•Œé¢æ¥ç®¡ç†æ‚¨çš„ä»£ç†èŠ‚ç‚¹ã€ç›‘æ§ç³»ç»Ÿèµ„æºå’Œæ§åˆ¶æœåŠ¡ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© Hysteria2 Managerï¼Ÿ

- **ğŸ” å®‰å…¨è®¤è¯** - å¸¦ç”¨æˆ·è®¤è¯çš„Webç•Œé¢ä¿æŠ¤
- **ğŸ¨ ç°ä»£åŒ–UI** - ç§‘æŠ€é£æ ¼çš„æ·±è‰²ä¸»é¢˜ç•Œé¢
- **âš¡ ä¸€é”®éƒ¨ç½²** - è‡ªåŠ¨åŒ–å®‰è£…å’Œé…ç½®
- **ğŸ“Š å®æ—¶ç›‘æ§** - å®æ—¶æµé‡å’Œç³»ç»Ÿèµ„æºç»Ÿè®¡
- **ğŸŒ å¤šèŠ‚ç‚¹æ”¯æŒ** - è½»æ¾åˆ‡æ¢å¤šä¸ªä»£ç†æœåŠ¡å™¨
- **ğŸ›¡ï¸ ç³»ç»Ÿä¼˜åŒ–** - è‡ªåŠ¨å†…æ ¸å‚æ•°è°ƒä¼˜

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ä¸»è¦åŠŸèƒ½

- âœ… **Webè®¤è¯ç³»ç»Ÿ** - å®‰å…¨ç™»å½•å’Œä¼šè¯ç®¡ç†
- âœ… **èŠ‚ç‚¹ç®¡ç†** - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å’Œåˆ‡æ¢èŠ‚ç‚¹
- âœ… **æœåŠ¡æ§åˆ¶** - å¯åŠ¨/åœæ­¢/é‡å¯ä»£ç†æœåŠ¡
- âœ… **å®æ—¶ç»Ÿè®¡** - æµé‡ã€CPUã€å†…å­˜ç›‘æ§
- âœ… **æ—¥å¿—æŸ¥çœ‹å™¨** - å®æ—¶æ—¥å¿—æµæ˜¾ç¤º
- âœ… **ç³»ç»Ÿè®¾ç½®** - å…¨é¢çš„é…ç½®é€‰é¡¹
- âœ… **URLè§£æ** - æ”¯æŒ hy2://ã€hysteria2://ã€hysteria:// æ ¼å¼
- âœ… **å¯†ç ç®¡ç†** - å®‰å…¨çš„å¯†ç ä¿®æ”¹åŠŸèƒ½

### æŠ€æœ¯ç‰¹æ€§

- ğŸ”§ **RESTful API** - å®Œæ•´çš„APIç”¨äºè‡ªåŠ¨åŒ–
- ğŸ **Pythonåç«¯** - åŸºäºFlaskæ¡†æ¶
- ğŸ“¦ **å•æ–‡ä»¶å‰ç«¯** - æ‰€æœ‰UIä»£ç åœ¨ä¸€ä¸ªHTMLæ–‡ä»¶ä¸­
- ğŸ”„ **è‡ªåŠ¨æ›´æ–°** - æ£€æŸ¥å¹¶å®‰è£…æ›´æ–°
- ğŸ“± **å“åº”å¼è®¾è®¡** - ç§»åŠ¨ç«¯å‹å¥½ç•Œé¢
- ğŸŒ **å›½é™…åŒ–æ”¯æŒ** - ä¸­æ–‡/è‹±æ–‡ï¼ˆè®¡åˆ’ä¸­ï¼‰

### å®‰å…¨ç‰¹æ€§

- ğŸ”’ **åŠ å¯†å­˜å‚¨** - å®‰å…¨çš„å‡­è¯å­˜å‚¨
- ğŸš« **ç™»å½•é™åˆ¶** - é˜²æ­¢æš´åŠ›ç ´è§£
- â±ï¸ **ä¼šè¯è¶…æ—¶** - è‡ªåŠ¨ç™»å‡ºä¿æŠ¤
- ğŸ“ **å®¡è®¡æ—¥å¿—** - è·Ÿè¸ªæ‰€æœ‰æ“ä½œ

## ğŸ’» ç³»ç»Ÿè¦æ±‚

### æœ€ä½è¦æ±‚

| ç»„ä»¶ | è¦æ±‚ |
|------|------|
| **æ“ä½œç³»ç»Ÿ** | Linux (Ubuntu 18.04+, Debian 9+, CentOS 7+) |
| **æ¶æ„** | x86_64, arm64, armv7 |
| **å†…å­˜** | 512MB |
| **å­˜å‚¨** | 100MB å¯ç”¨ç©ºé—´ |
| **Python** | 3.6+ |
| **ç½‘ç»œ** | äº’è”ç½‘è¿æ¥ |
| **æƒé™** | Root æƒé™ |

### æ¨èé…ç½®

| ç»„ä»¶ | æ¨è |
|------|------|
| **æ“ä½œç³»ç»Ÿ** | Ubuntu 22.04 LTS |
| **å†…å­˜** | 1GB+ |
| **å­˜å‚¨** | 500MB+ |
| **CPU** | 2+ æ ¸å¿ƒ |
| **ç½‘ç»œ** | ç¨³å®šçš„å®½å¸¦è¿æ¥ |

## ğŸš€ ä¸€é”®å®‰è£…

### å¿«é€Ÿå®‰è£…å‘½ä»¤

```bash
# ä½¿ç”¨ wget
wget -O install.sh https://raw.githubusercontent.com/yourusername/hysteria2-manager/main/install.sh && sudo bash install.sh

# ä½¿ç”¨ curl
curl -fsSL https://raw.githubusercontent.com/yourusername/hysteria2-manager/main/install.sh | sudo bash

# å›½å†…ç”¨æˆ·ä½¿ç”¨é•œåƒ
wget -O install.sh https://ghproxy.com/https://raw.githubusercontent.com/yourusername/hysteria2-manager/main/install.sh && sudo bash install.sh
```

### å®‰è£…è¿‡ç¨‹

å®‰è£…ç¨‹åºå°†è‡ªåŠ¨ï¼š
1. âœ… æ£€æµ‹ç³»ç»Ÿç¯å¢ƒ
2. âœ… å®‰è£…ä¾èµ–åŒ…
3. âœ… ä¸‹è½½ Hysteria2 æ ¸å¿ƒ
4. âœ… é…ç½®ç³»ç»ŸæœåŠ¡
5. âœ… ä¼˜åŒ–å†…æ ¸å‚æ•°
6. âœ… å¯åŠ¨Webç•Œé¢

### å®‰è£…å®Œæˆå

å®‰è£…æˆåŠŸåï¼Œæ‚¨å°†çœ‹åˆ°ï¼š
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     Hysteria2 Manager å®‰è£…æˆåŠŸï¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
è®¿é—®ä¿¡æ¯:
  æœ¬åœ°è®¿é—®: http://127.0.0.1:8080
  è¿œç¨‹è®¿é—®: http://æ‚¨çš„æœåŠ¡å™¨IP:8080

ç™»å½•ä¿¡æ¯:
  ç”¨æˆ·å: admin
  å¯†ç : admin
  âš ï¸ è¯·ç«‹å³ç™»å½•å¹¶ä¿®æ”¹é»˜è®¤å¯†ç ï¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ“– ä½¿ç”¨æ•™ç¨‹

### 1. é¦–æ¬¡ç™»å½•

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://æ‚¨çš„æœåŠ¡å™¨IP:8080`
2. ä½¿ç”¨é»˜è®¤å‡­è¯ç™»å½•ï¼š
   - **ç”¨æˆ·åï¼š** `admin`
   - **å¯†ç ï¼š** `admin`
3. **é‡è¦ï¼š** é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç 

### 2. æ·»åŠ èŠ‚ç‚¹

#### æ–¹æ³•ä¸€ï¼šURLå¯¼å…¥

1. è¿›å…¥ **èŠ‚ç‚¹ç®¡ç†**
2. ç‚¹å‡» **æ·»åŠ èŠ‚ç‚¹**
3. é€‰æ‹© **é“¾æ¥å¯¼å…¥** æ ‡ç­¾
4. ç²˜è´´æ‚¨çš„èŠ‚ç‚¹URLï¼š
   ```
   hy2://å¯†ç @æœåŠ¡å™¨.com:443/?sni=æœåŠ¡å™¨.com
   hysteria2://å¯†ç @æœåŠ¡å™¨.com:443/?sni=æœåŠ¡å™¨.com
   ```
5. ç‚¹å‡» **æ·»åŠ èŠ‚ç‚¹**

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨é…ç½®

1. è¿›å…¥ **èŠ‚ç‚¹ç®¡ç†**
2. ç‚¹å‡» **æ·»åŠ èŠ‚ç‚¹**
3. é€‰æ‹© **æ‰‹åŠ¨é…ç½®** æ ‡ç­¾
4. å¡«å†™è¯¦ç»†ä¿¡æ¯ï¼š
   - **åç§°ï¼š** èŠ‚ç‚¹è‡ªå®šä¹‰åç§°
   - **æœåŠ¡å™¨ï¼š** æœåŠ¡å™¨åœ°å€ï¼ˆIPæˆ–åŸŸåï¼‰
   - **ç«¯å£ï¼š** æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤443ï¼‰
   - **å¯†ç ï¼š** è®¤è¯å¯†ç 
   - **SNIï¼š** æœåŠ¡å™¨åç§°æŒ‡ç¤ºï¼ˆå¯é€‰ï¼‰
5. ç‚¹å‡» **æ·»åŠ èŠ‚ç‚¹**

### 3. è¿æ¥ä»£ç†

1. ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹
2. ç‚¹å‡» **ä½¿ç”¨** æŒ‰é’®
3. è¿›å…¥ **ä»ªè¡¨æ¿**
4. ç‚¹å‡» **å¯åŠ¨æœåŠ¡**
5. ç­‰å¾…è¿æ¥çŠ¶æ€æ˜¾ç¤º **å·²è¿æ¥**

### 4. ç›‘æ§çŠ¶æ€

ä»ªè¡¨æ¿æ˜¾ç¤ºï¼š
- **æœåŠ¡çŠ¶æ€** - è¿è¡Œä¸­/å·²åœæ­¢
- **å½“å‰èŠ‚ç‚¹** - æ´»åŠ¨èŠ‚ç‚¹åç§°
- **ä¸Šä¼ é€Ÿåº¦** - å®æ—¶ä¸Šä¼ æµé‡
- **ä¸‹è½½é€Ÿåº¦** - å®æ—¶ä¸‹è½½æµé‡
- **è¿æ¥ä¿¡æ¯** - IPã€ä½ç½®ã€å»¶è¿Ÿ
- **ç³»ç»Ÿèµ„æº** - CPUã€å†…å­˜ä½¿ç”¨ç‡

### 5. ä¿®æ”¹å¯†ç 

1. è¿›å…¥ **ç³»ç»Ÿè®¾ç½®**
2. åœ¨ **è´¦æˆ·è®¾ç½®** ä¸‹ï¼š
   - è¾“å…¥å½“å‰å¯†ç 
   - è¾“å…¥æ–°å¯†ç 
   - ç¡®è®¤æ–°å¯†ç 
3. ç‚¹å‡» **ä¿®æ”¹å¯†ç **

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®

```
/opt/hysteria2-manager/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ config.json        # ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ nodes.json         # èŠ‚ç‚¹æ•°æ®
â”‚   â””â”€â”€ users.json         # ç”¨æˆ·æ•°æ®
â”œâ”€â”€ static/
â”‚   â””â”€â”€ dashboard.html     # Webç•Œé¢
â””â”€â”€ hysteria2_manager.py   # æ ¸å¿ƒç¨‹åº

/etc/hysteria2/
â””â”€â”€ client.yaml            # Hysteria2å®¢æˆ·ç«¯é…ç½®

/var/log/hysteria2/
â”œâ”€â”€ manager.log            # ç®¡ç†å™¨æ—¥å¿—
â””â”€â”€ hysteria.log           # Hysteria2æ—¥å¿—
```

### ç³»ç»Ÿé…ç½® (config.json)

```json
{
  "version": "2.0.0",
  "web_port": 8080,
  "web_host": "0.0.0.0",
  "language": "zh-CN",
  "theme": "dark",
  "auth": {
    "enabled": true,
    "session_timeout": 3600
  },
  "hysteria": {
    "bin_path": "/usr/local/bin/hysteria",
    "config_path": "/etc/hysteria2/client.yaml",
    "log_level": "info"
  },
  "system": {
    "auto_start": true,
    "auto_optimize": true,
    "check_update": true,
    "log_retention_days": 7
  },
  "security": {
    "max_login_attempts": 5,
    "lockout_duration": 300,
    "require_https": false
  }
}
```

### èŠ‚ç‚¹URLæ ¼å¼

æ”¯æŒçš„æ ¼å¼ï¼š
```
# åŸºæœ¬æ ¼å¼
hy2://å¯†ç @æœåŠ¡å™¨:ç«¯å£

# å¸¦å‚æ•°
hy2://å¯†ç @æœåŠ¡å™¨:ç«¯å£/?sni=åŸŸå&insecure=1

# å®Œæ•´æ ¼å¼
hysteria2://å¯†ç @æœåŠ¡å™¨:ç«¯å£/?sni=åŸŸå&obfs=salamander&obfs-password=æ··æ·†å¯†ç 

# å¸¦è‡ªå®šä¹‰åç§°
hy2://å¯†ç @æœåŠ¡å™¨:ç«¯å£/#èŠ‚ç‚¹åç§°
```

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é»˜è®¤è®¾ç½®ï¼š
```bash
export HY2_MANAGER_PORT=8888          # Webç«¯å£
export HY2_MANAGER_HOST=127.0.0.1     # ç›‘å¬åœ°å€
export HY2_MANAGER_DEBUG=true         # è°ƒè¯•æ¨¡å¼
```

## ğŸ”§ å‘½ä»¤å‚è€ƒ

### CLIå·¥å…· (hy2)

å®‰è£…åï¼Œä½¿ç”¨ `hy2` å‘½ä»¤å¿«é€Ÿç®¡ç†ï¼š

```bash
# æœåŠ¡ç®¡ç†
hy2 status              # æ˜¾ç¤ºæœåŠ¡çŠ¶æ€
hy2 start               # å¯åŠ¨ä»£ç†æœåŠ¡
hy2 stop                # åœæ­¢ä»£ç†æœåŠ¡
hy2 restart             # é‡å¯ä»£ç†æœåŠ¡

# ä¿¡æ¯æ˜¾ç¤º
hy2 test                # æµ‹è¯•ä»£ç†è¿æ¥
hy2 web                 # æ˜¾ç¤ºWebUIåœ°å€

# æ—¥å¿—æŸ¥çœ‹
hy2 logs                # æŸ¥çœ‹å®¢æˆ·ç«¯æ—¥å¿—
hy2 manager-logs        # æŸ¥çœ‹ç®¡ç†å™¨æ—¥å¿—

# æ›´æ–°
hy2 update              # æ£€æŸ¥æ›´æ–°
```

### æœåŠ¡ç®¡ç† (systemctl)

```bash
# ç®¡ç†å™¨æœåŠ¡
sudo systemctl status hysteria2-manager    # æ£€æŸ¥çŠ¶æ€
sudo systemctl start hysteria2-manager     # å¯åŠ¨æœåŠ¡
sudo systemctl stop hysteria2-manager      # åœæ­¢æœåŠ¡
sudo systemctl restart hysteria2-manager   # é‡å¯æœåŠ¡
sudo systemctl enable hysteria2-manager    # å¯ç”¨è‡ªå¯åŠ¨

# å®¢æˆ·ç«¯æœåŠ¡
sudo systemctl status hysteria2-client     # æ£€æŸ¥çŠ¶æ€
sudo systemctl start hysteria2-client      # å¯åŠ¨å®¢æˆ·ç«¯
sudo systemctl stop hysteria2-client       # åœæ­¢å®¢æˆ·ç«¯
sudo systemctl restart hysteria2-client    # é‡å¯å®¢æˆ·ç«¯
sudo systemctl enable hysteria2-client     # å¯ç”¨è‡ªå¯åŠ¨

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u hysteria2-manager -f    # ç®¡ç†å™¨æ—¥å¿—
sudo journalctl -u hysteria2-client -f     # å®¢æˆ·ç«¯æ—¥å¿—
```

### å®‰è£…ç®¡ç†

```bash
# æ›´æ–°
bash install.sh update

# å¸è½½
bash install.sh uninstall

# å¼ºåˆ¶é‡æ–°å®‰è£…
bash install.sh force
```

## ğŸ“¡ API æ–‡æ¡£

### è®¤è¯ç«¯ç‚¹

#### ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin"
}

å“åº”:
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "username": "admin",
    "role": "admin",
    "session_id": "...",
    "expires_in": 3600
  }
}
```

#### ç™»å‡º
```http
POST /api/auth/logout

å“åº”:
{
  "success": true,
  "message": "ç™»å‡ºæˆåŠŸ"
}
```

#### ä¿®æ”¹å¯†ç 
```http
POST /api/auth/change_password
Content-Type: application/json

{
  "old_password": "å½“å‰å¯†ç ",
  "new_password": "æ–°å¯†ç "
}
```

### æœåŠ¡ç®¡ç†

#### è·å–çŠ¶æ€
```http
GET /api/status

å“åº”:
{
  "success": true,
  "data": {
    "service": {
      "hysteria": "running",
      "manager": "running",
      "tun_interface": true
    },
    "connection": {
      "status": "connected",
      "ip": "x.x.x.x",
      "location": "US",
      "latency": 50,
      "dns": true,
      "http": true
    },
    "stats": {
      "traffic": {
        "up": 1024,
        "down": 2048
      }
    }
  }
}
```

#### æœåŠ¡æ§åˆ¶
```http
POST /api/service/start    # å¯åŠ¨æœåŠ¡
POST /api/service/stop     # åœæ­¢æœåŠ¡
POST /api/service/restart  # é‡å¯æœåŠ¡
```

### èŠ‚ç‚¹ç®¡ç†

#### è·å–èŠ‚ç‚¹
```http
GET /api/nodes

å“åº”:
{
  "success": true,
  "data": {
    "nodes": [...],
    "current": "èŠ‚ç‚¹ID"
  }
}
```

#### æ·»åŠ èŠ‚ç‚¹
```http
POST /api/nodes
Content-Type: application/json

# æ–¹æ³•1: URLå¯¼å…¥
{
  "url": "hy2://å¯†ç @æœåŠ¡å™¨:ç«¯å£/?sni=åŸŸå",
  "name": "è‡ªå®šä¹‰åç§°"
}

# æ–¹æ³•2: æ‰‹åŠ¨é…ç½®
{
  "name": "èŠ‚ç‚¹åç§°",
  "server": "æœåŠ¡å™¨.com",
  "port": 443,
  "password": "å¯†ç ",
  "sni": "æœåŠ¡å™¨.com"
}
```

#### ä½¿ç”¨èŠ‚ç‚¹
```http
POST /api/nodes/:id/use
```

#### åˆ é™¤èŠ‚ç‚¹
```http
DELETE /api/nodes/:id
```

### ç³»ç»Ÿæ“ä½œ

#### è·å–æ—¥å¿—
```http
GET /api/logs?lines=100&type=all
```

#### è·å–ç³»ç»Ÿç»Ÿè®¡
```http
GET /api/system/stats
```

#### æµ‹è¯•è¿æ¥
```http
GET /api/test
```

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. æ— æ³•è®¿é—®WebUI

**é—®é¢˜ï¼š** æ— æ³•è¿æ¥åˆ° http://æœåŠ¡å™¨IP:8080

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status hysteria2-manager

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tuln | grep 8080

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status
sudo ufw allow 8080/tcp  # å¦‚æœä½¿ç”¨ufw

# å¯¹äºfirewalld
sudo firewall-cmd --add-port=8080/tcp --permanent
sudo firewall-cmd --reload
```

#### 2. ç™»å½•å¤±è´¥

**é—®é¢˜ï¼š** æ— æ³•ä½¿ç”¨é»˜è®¤å‡­è¯ç™»å½•

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# é‡ç½®ä¸ºé»˜è®¤å¯†ç 
sudo python3 << EOF
import json
from werkzeug.security import generate_password_hash

users_file = '/opt/hysteria2-manager/data/users.json'
with open(users_file, 'r') as f:
    users = json.load(f)

users['users'][0]['password'] = generate_password_hash('admin')
users['users'][0]['failed_attempts'] = 0
users['users'][0]['locked_until'] = None

with open(users_file, 'w') as f:
    json.dump(users, f, indent=2)

print("å¯†ç å·²é‡ç½®ä¸º: admin")
EOF

# é‡å¯æœåŠ¡
sudo systemctl restart hysteria2-manager
```

#### 3. ä»£ç†æ— æ³•å·¥ä½œ

**é—®é¢˜ï¼š** å·²è¿æ¥ä½†æ— æ³•è®¿é—®äº’è”ç½‘

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥Hysteria2å®¢æˆ·ç«¯çŠ¶æ€
sudo systemctl status hysteria2-client

# æ£€æŸ¥TUNæ¥å£
ip link show hytun

# æ£€æŸ¥è·¯ç”±
ip route | grep hytun

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u hysteria2-client -n 100

# æ‰‹åŠ¨æµ‹è¯•é…ç½®
sudo /usr/local/bin/hysteria client -c /etc/hysteria2/client.yaml
```

#### 4. é«˜CPU/å†…å­˜å ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥è¿›ç¨‹ä½¿ç”¨
htop

# æ¸…ç†æ—¥å¿—
sudo truncate -s 0 /var/log/hysteria2/*.log

# é‡å¯æœåŠ¡
sudo systemctl restart hysteria2-manager
sudo systemctl restart hysteria2-client

# æ£€æŸ¥å†…å­˜æ³„æ¼
ps aux | grep hysteria
```

### è¯Šæ–­å‘½ä»¤

```bash
# å®Œæ•´ç³»ç»Ÿæ£€æŸ¥
cat > /tmp/diagnose.sh << 'EOF'
#!/bin/bash
echo "=== ç³»ç»Ÿè¯Šæ–­ ==="
echo "1. æœåŠ¡çŠ¶æ€:"
systemctl status hysteria2-manager --no-pager | head -10
systemctl status hysteria2-client --no-pager | head -10

echo -e "\n2. ç«¯å£çŠ¶æ€:"
netstat -tuln | grep -E ":(8080|443)"

echo -e "\n3. TUNæ¥å£:"
ip link show hytun 2>/dev/null || echo "TUNæ¥å£æœªæ‰¾åˆ°"

echo -e "\n4. å½“å‰IP:"
curl -s https://ifconfig.io || echo "æ— æ³•è·å–IP"

echo -e "\n5. DNSæµ‹è¯•:"
nslookup google.com 8.8.8.8 | head -5

echo -e "\n6. èµ„æºä½¿ç”¨:"
free -h
df -h /

echo -e "\n7. æœ€è¿‘é”™è¯¯:"
journalctl -p err --since "1 hour ago" | tail -20
EOF

bash /tmp/diagnose.sh
```

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ›´æ”¹Webç«¯å£ï¼Ÿ

**ç­”ï¼š** ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
```bash
# ç¼–è¾‘é…ç½®
sudo nano /opt/hysteria2-manager/data/config.json
# å°† "web_port": 8080 æ”¹ä¸ºæ‚¨éœ€è¦çš„ç«¯å£

# é‡å¯æœåŠ¡
sudo systemctl restart hysteria2-manager
```

### Q2: å¦‚ä½•å¯ç”¨HTTPSï¼Ÿ

**ç­”ï¼š** ä½¿ç”¨Nginxåå‘ä»£ç†ï¼š
```nginx
server {
    listen 443 ssl;
    server_name æ‚¨çš„åŸŸå.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### Q3: å¦‚ä½•å¤‡ä»½é…ç½®ï¼Ÿ

**ç­”ï¼š** å¤‡ä»½æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼š
```bash
# åˆ›å»ºå¤‡ä»½
tar -czf hysteria2-backup-$(date +%Y%m%d).tar.gz \
    /opt/hysteria2-manager/data/ \
    /etc/hysteria2/

# æ¢å¤å¤‡ä»½
tar -xzf hysteria2-backup-20240120.tar.gz -C /
```

### Q4: å¦‚ä½•è¿ç§»åˆ°å¦ä¸€å°æœåŠ¡å™¨ï¼Ÿ

**ç­”ï¼š** æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
```bash
# åœ¨æ—§æœåŠ¡å™¨ - å¯¼å‡º
tar -czf hysteria2-migrate.tar.gz \
    /opt/hysteria2-manager/ \
    /etc/hysteria2/

# åœ¨æ–°æœåŠ¡å™¨ - å¯¼å…¥
scp user@æ—§æœåŠ¡å™¨:~/hysteria2-migrate.tar.gz .
tar -xzf hysteria2-migrate.tar.gz -C /
bash install.sh  # è¿è¡Œå®‰è£…ç¨‹åºè®¾ç½®æœåŠ¡
```

### Q5: å¦‚ä½•ä½¿ç”¨å¤šç”¨æˆ·ï¼Ÿ

**ç­”ï¼š** ç›®å‰åªæ”¯æŒå•ä¸ªç®¡ç†å‘˜ç”¨æˆ·ã€‚å¤šç”¨æˆ·æ”¯æŒè®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­åŠ å…¥ã€‚

### Q6: å¦‚ä½•æŸ¥çœ‹å®æ—¶æµé‡ï¼Ÿ

**ç­”ï¼š** ä»ªè¡¨æ¿ä¼šè‡ªåŠ¨æ¯5ç§’æ›´æ–°ä¸€æ¬¡æµé‡ç»Ÿè®¡ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼š
```bash
# å®æ—¶æµé‡ç›‘æ§
watch -n 1 'ip -s link show hytun'
```

### Q7: èŠ‚ç‚¹é“¾æ¥æ ¼å¼æœ‰å“ªäº›ï¼Ÿ

**ç­”ï¼š** æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š
- `hy2://` - Hysteria2æ ‡å‡†æ ¼å¼
- `hysteria2://` - å®Œæ•´æ ¼å¼
- `hysteria://` - å…¼å®¹æ ¼å¼

å‚æ•°æ”¯æŒï¼š
- `sni` - æœåŠ¡å™¨åç§°æŒ‡ç¤º
- `insecure` - è·³è¿‡è¯ä¹¦éªŒè¯
- `obfs` - æ··æ·†ç±»å‹
- `obfs-password` - æ··æ·†å¯†ç 
- `alpn` - ALPNåè®®
- `up/down` - å¸¦å®½é™åˆ¶

### Q8: å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ

**ç­”ï¼š** ç³»ç»Ÿå·²è‡ªåŠ¨ä¼˜åŒ–ï¼Œé¢å¤–ä¼˜åŒ–ï¼š
```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
ulimit -n 65535

# ä¼˜åŒ–TCPå‚æ•°
echo "net.ipv4.tcp_congestion_control = bbr" >> /etc/sysctl.conf
sysctl -p

# ä½¿ç”¨æ›´å¿«çš„DNS
echo "nameserver 1.1.1.1" > /etc/resolv.conf
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2024-01-20)
- ğŸ” **æ–°å¢ï¼š** å®Œæ•´çš„è®¤è¯ç³»ç»Ÿ
- ğŸ¨ **æ–°å¢ï¼š** ç°ä»£ç§‘æŠ€é£æ ¼UIï¼Œæ·±è‰²ä¸»é¢˜
- ğŸ”§ **æ–°å¢ï¼š** RESTful APIå¸¦ä¼šè¯ç®¡ç†
- âœ… **ä¿®å¤ï¼š** æ‰€æœ‰å·²çŸ¥v1.0é—®é¢˜
- âœ… **ä¿®å¤ï¼š** URLè§£ææ”¯æŒæ‰€æœ‰æ ¼å¼
- âœ… **ä¿®å¤ï¼š** è¿æ¥çŠ¶æ€æ£€æµ‹
- âœ… **ä¿®å¤ï¼š** DNSæµ‹è¯•å¯é æ€§
- âœ… **ä¿®å¤ï¼š** æ—¥å¿—æŸ¥çœ‹åŠŸèƒ½
- âœ… **ä¿®å¤ï¼š** ç³»ç»Ÿèµ„æºç›‘æ§
- ğŸ“¦ **æ”¹è¿›ï¼š** å®‰è£…æµç¨‹
- ğŸ“Š **æ”¹è¿›ï¼š** å®æ—¶ç»Ÿè®¡
- ğŸ›¡ï¸ **æ”¹è¿›ï¼š** å®‰å…¨ç‰¹æ€§

### v1.0.0 (2024-01-15)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ åŸºç¡€åŠŸèƒ½å®ç°
- ğŸ¨ Web UIç•Œé¢
- ğŸ“¦ ä¸€é”®å®‰è£…è„šæœ¬

### å¼€å‘è·¯çº¿å›¾

- [ ] v2.1.0 - å¤šç”¨æˆ·æ”¯æŒ
- [ ] v2.2.0 - Dockerå®¹å™¨æ”¯æŒ
- [ ] v2.3.0 - è®¢é˜…ç®¡ç†
- [ ] v2.4.0 - æµé‡ç»Ÿè®¡å’Œé™åˆ¶
- [ ] v2.5.0 - è§„åˆ™è·¯ç”±
- [ ] v3.0.0 - ç§»åŠ¨ç«¯APP

## ğŸ¤ å¼€å‘è¯´æ˜

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/hysteria2-manager.git
cd hysteria2-manager

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install flask flask-cors psutil pyyaml requests bcrypt

# è°ƒè¯•æ¨¡å¼è¿è¡Œ
export HY2_MANAGER_DEBUG=true
python hysteria2_manager.py
```

### é¡¹ç›®ç»“æ„

```
hysteria2-manager/
â”œâ”€â”€ install.sh                    # å®‰è£…è„šæœ¬
â”œâ”€â”€ hysteria2_manager.py          # æ ¸å¿ƒç¨‹åº
â”œâ”€â”€ static/
â”‚   â””â”€â”€ dashboard.html            # Webç•Œé¢
â”œâ”€â”€ data/                         # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ config.json              # ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ nodes.json               # èŠ‚ç‚¹æ•°æ®
â”‚   â””â”€â”€ users.json               # ç”¨æˆ·æ•°æ®
â”œâ”€â”€ system/                       # ç³»ç»Ÿæ–‡ä»¶
â”‚   â”œâ”€â”€ hysteria2-manager.service # systemdæœåŠ¡æ–‡ä»¶
â”‚   â””â”€â”€ hysteria2-client.service  # å®¢æˆ·ç«¯æœåŠ¡æ–‡ä»¶
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                   # APIæ–‡æ¡£
â”‚   â””â”€â”€ DEVELOPMENT.md           # å¼€å‘æ–‡æ¡£
â”œâ”€â”€ tests/                        # æµ‹è¯•
â”‚   â””â”€â”€ test_manager.py          # å•å…ƒæµ‹è¯•
â”œâ”€â”€ requirements.txt              # Pythonä¾èµ–
â”œâ”€â”€ LICENSE                       # è®¸å¯è¯
â””â”€â”€ README.md                     # è¯´æ˜æ–‡æ¡£
```

### è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### æäº¤é—®é¢˜

è¯·åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
- ç³»ç»Ÿä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿã€Pythonç‰ˆæœ¬ï¼‰
- é”™è¯¯æ—¥å¿—
- é‡ç°æ­¥éª¤
- é¢„æœŸè¡Œä¸º vs å®é™…è¡Œä¸º

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [Hysteria2](https://github.com/apernet/hysteria) - å¼ºå¤§çš„ä»£ç†æ ¸å¿ƒ
- [Flask](https://flask.palletsprojects.com/) - Python Webæ¡†æ¶
- [Vue.js](https://vuejs.org/) - å‰ç«¯æ¡†æ¶
- [Chart.js](https://www.chartjs.org/) - æ•°æ®å¯è§†åŒ–
- æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub Issuesï¼š** [æŠ¥å‘Šé—®é¢˜](https://github.com/yourusername/hysteria2-manager/issues)
- **Discussionsï¼š** [æé—®è®¨è®º](https://github.com/yourusername/hysteria2-manager/discussions)
- **é‚®ç®±ï¼š** admin@example.com
- **Telegramï¼š** [@hysteria2manager](https://t.me/hysteria2manager)

## ğŸŒŸ Starå†å²

[![Star History Chart](https://api.star-history.com/svg?repos=yourusername/hysteria2-manager&type=Date)](https://star-history.com/#yourusername/hysteria2-manager&Date)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ Starï¼**

[![GitHub Stars](https://img.shields.io/github/stars/yourusername/hysteria2-manager?style=social)](https://github.com/yourusername/hysteria2-manager)
[![GitHub Forks](https://img.shields.io/github/forks/yourusername/hysteria2-manager?style=social)](https://github.com/yourusername/hysteria2-manager/fork)
[![GitHub Issues](https://img.shields.io/github/issues/yourusername/hysteria2-manager)](https://github.com/yourusername/hysteria2-manager/issues)
[![GitHub License](https://img.shields.io/github/license/yourusername/hysteria2-manager)](https://github.com/yourusername/hysteria2-manager/blob/main/LICENSE)

[è¿”å›é¡¶éƒ¨](#hysteria2-manager-v20)

</div>
